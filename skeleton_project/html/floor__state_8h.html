<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Heislab_Gruppe1: source/driver/floor_state.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Heislab_Gruppe1
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_b2f33c71d4aa5e7af42a1ca61ff5af1b.html">source</a></li><li class="navelem"><a class="el" href="dir_994f02ce98b4f4f84e2e327b8cbd211b.html">driver</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">floor_state.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>the file that handles the state of the floors and the elevator direction.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="head__include__file_8h_source.html">head_include_file.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for floor_state.h:</div>
<div class="dyncontent">
<div class="center"><img src="floor__state_8h__incl.png" border="0" usemap="#source_2driver_2floor__state_8h" alt=""/></div>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="floor__state_8h__dep__incl.png" border="0" usemap="#source_2driver_2floor__state_8hdep" alt=""/></div>
</div>
</div>
<p><a href="floor__state_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a663f8098654c9c88df7820e95e8b5b5d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="floor__state_8h.html#a663f8098654c9c88df7820e95e8b5b5d">update_current_floor_state</a> (float *current_floor, int floor_sensor, MotorDirection *direction, int *previous_floor)</td></tr>
<tr class="memdesc:a663f8098654c9c88df7820e95e8b5b5d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the floor state to the real time exact position of the elevator. This function makes a semi-state for when the elevator is between two floors. <br  />
 It does this by: <br  />
 1. It checks if the elevator is in an undefined state or not. <br  />
 2. If the floor state is undefined, it checks the motor direction. Based on this it subtracts or adds "0.5" to the floor state value to indicate that the position of the elevator is between two floors.  <a href="floor__state_8h.html#a663f8098654c9c88df7820e95e8b5b5d">More...</a><br /></td></tr>
<tr class="separator:a663f8098654c9c88df7820e95e8b5b5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fbada2b7015a9923f2e8c1db0a3b4b7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="floor__state_8h.html#a2fbada2b7015a9923f2e8c1db0a3b4b7">update_previous_floor_state</a> (int floor_sensor, int *previous_floor)</td></tr>
<tr class="memdesc:a2fbada2b7015a9923f2e8c1db0a3b4b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the previous floor state after the elevator has changed its floor state.  <a href="floor__state_8h.html#a2fbada2b7015a9923f2e8c1db0a3b4b7">More...</a><br /></td></tr>
<tr class="separator:a2fbada2b7015a9923f2e8c1db0a3b4b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b8ab0d9091b38d2a3367e065ae6804a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="floor__state_8h.html#a4b8ab0d9091b38d2a3367e065ae6804a">update_floor_order_lights</a> (int *stop_array_up, int *stop_array_down, int *elevator_panel_lights_array)</td></tr>
<tr class="memdesc:a4b8ab0d9091b38d2a3367e065ae6804a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the floor order lights on both the elevator panel and the elevator floor panel. It uses a for-loop to iterate through the arrays related to the lights, and turns the lights on or off based on the arrays.  <a href="floor__state_8h.html#a4b8ab0d9091b38d2a3367e065ae6804a">More...</a><br /></td></tr>
<tr class="separator:a4b8ab0d9091b38d2a3367e065ae6804a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb679d62d6c78e2fa1d235cf28bc9596"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="floor__state_8h.html#aeb679d62d6c78e2fa1d235cf28bc9596">check_for_orders_at_floor</a> (int floor_sensor, int *stop_array_up, int *stop_array_down, int *elevator_panel_lights_array, MotorDirection *direction, int *elevator_queue)</td></tr>
<tr class="memdesc:aeb679d62d6c78e2fa1d235cf28bc9596"><td class="mdescLeft">&#160;</td><td class="mdescRight">Uses boolean logic to decide if we want to return a status flag to stop the elevator on a floor. <br  />
 Based on the motor direction, last measured floor state and the elevator queue, the flag returns either a value of "0" or "1".  <a href="floor__state_8h.html#aeb679d62d6c78e2fa1d235cf28bc9596">More...</a><br /></td></tr>
<tr class="separator:aeb679d62d6c78e2fa1d235cf28bc9596"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c40f33f9efa8199d3c57a90df23dd45"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="floor__state_8h.html#a8c40f33f9efa8199d3c57a90df23dd45">decide_direction_state</a> (int *elevator_queue, MotorDirection *direction, float *current_floor)</td></tr>
<tr class="memdesc:a8c40f33f9efa8199d3c57a90df23dd45"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the elevator direction based on the elevator floor state and the first element in the elevator queue.  <a href="floor__state_8h.html#a8c40f33f9efa8199d3c57a90df23dd45">More...</a><br /></td></tr>
<tr class="separator:a8c40f33f9efa8199d3c57a90df23dd45"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>the file that handles the state of the floors and the elevator direction. </p>
<dl class="section author"><dt>Author</dt><dd>Simon Krane &amp; Clemens Sundby Ã˜xnevad </dd></dl>
<dl class="section version"><dt>Version</dt><dd>0.1 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2022-03-01</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (c) 2022 </dd></dl>

<p class="definition">Definition in file <a class="el" href="floor__state_8h_source.html">floor_state.h</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="aeb679d62d6c78e2fa1d235cf28bc9596"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb679d62d6c78e2fa1d235cf28bc9596">&#9670;&nbsp;</a></span>check_for_orders_at_floor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int check_for_orders_at_floor </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>floor_sensor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>stop_array_up</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>stop_array_down</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>elevator_panel_lights_array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MotorDirection *&#160;</td>
          <td class="paramname"><em>direction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>elevator_queue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Uses boolean logic to decide if we want to return a status flag to stop the elevator on a floor. <br  />
 Based on the motor direction, last measured floor state and the elevator queue, the flag returns either a value of "0" or "1". </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">floor_sensor</td><td>A variable that contains the measured floor state. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">stop_array_up</td><td>An array that indicates if the elevator floor panel up buttons are pushed. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">stop_array_down</td><td>An array that indicates if the elevator floor panel down buttons are pushed. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">elevator_panel_lights_array</td><td>An array that indicates if the elevator panel lights are on. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">direction</td><td>A pointer to the motor direction. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">elevator_queue</td><td>An array that represents the queue system of the elevator. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A status flag of "1" if we want to stop the elevator, or "0" if we don't want to stop the elevator. </dd></dl>

<p class="definition">Definition at line <a class="el" href="floor__state_8c_source.html#l00065">65</a> of file <a class="el" href="floor__state_8c_source.html">floor_state.c</a>.</p>

</div>
</div>
<a id="a8c40f33f9efa8199d3c57a90df23dd45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c40f33f9efa8199d3c57a90df23dd45">&#9670;&nbsp;</a></span>decide_direction_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void decide_direction_state </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>elevator_queue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MotorDirection *&#160;</td>
          <td class="paramname"><em>direction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>current_floor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the elevator direction based on the elevator floor state and the first element in the elevator queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">elevator_queue</td><td>An array that represents the queue system of the elevator. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">direction</td><td>A pointer to the motor direction. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">current_floor</td><td>A pointer to the current floor state of the elevator. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="floor__state_8c_source.html#l00103">103</a> of file <a class="el" href="floor__state_8c_source.html">floor_state.c</a>.</p>

</div>
</div>
<a id="a663f8098654c9c88df7820e95e8b5b5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a663f8098654c9c88df7820e95e8b5b5d">&#9670;&nbsp;</a></span>update_current_floor_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void update_current_floor_state </td>
          <td>(</td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>current_floor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>floor_sensor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MotorDirection *&#160;</td>
          <td class="paramname"><em>direction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>previous_floor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the floor state to the real time exact position of the elevator. This function makes a semi-state for when the elevator is between two floors. <br  />
 It does this by: <br  />
 1. It checks if the elevator is in an undefined state or not. <br  />
 2. If the floor state is undefined, it checks the motor direction. Based on this it subtracts or adds "0.5" to the floor state value to indicate that the position of the elevator is between two floors. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">current_floor</td><td>A pointer to the value of the current floor state. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">floor_sensor</td><td>A variable to the value of the floor state given the measurement of the floor sensor. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">direction</td><td>A pointer to the motor direction. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">previous_floor</td><td>A variable that gives the previous floor state value. <br  />
 </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="floor__state_8c_source.html#l00005">5</a> of file <a class="el" href="floor__state_8c_source.html">floor_state.c</a>.</p>

</div>
</div>
<a id="a4b8ab0d9091b38d2a3367e065ae6804a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b8ab0d9091b38d2a3367e065ae6804a">&#9670;&nbsp;</a></span>update_floor_order_lights()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void update_floor_order_lights </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>stop_array_up</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>stop_array_down</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>elevator_panel_lights_array</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the floor order lights on both the elevator panel and the elevator floor panel. It uses a for-loop to iterate through the arrays related to the lights, and turns the lights on or off based on the arrays. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">stop_array_up</td><td>An array that indicates if the elevator floor panel up buttons are pushed. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">stop_array_down</td><td>An array that indicates if the elevator floor panel down buttons are pushed. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">elevator_panel_lights_array</td><td>An array that indicates if the elevator panel lights are on. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="floor__state_8c_source.html#l00051">51</a> of file <a class="el" href="floor__state_8c_source.html">floor_state.c</a>.</p>

</div>
</div>
<a id="a2fbada2b7015a9923f2e8c1db0a3b4b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2fbada2b7015a9923f2e8c1db0a3b4b7">&#9670;&nbsp;</a></span>update_previous_floor_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void update_previous_floor_state </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>floor_sensor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>previous_floor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the previous floor state after the elevator has changed its floor state. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">floor_sensor</td><td>A variable to the current floor state value given from the floor sensor. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">previous_floor</td><td>A pointer to the value of the previous floor state. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="floor__state_8c_source.html#l00039">39</a> of file <a class="el" href="floor__state_8c_source.html">floor_state.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
